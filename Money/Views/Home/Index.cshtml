@{
    ViewData["Title"] = "被動指數投資 - 讓投資變得簡單";
}

<!-- Hero Section -->
<section class="hero-section">
    <div class="hero-content">
        <h1 class="hero-title">讓投資變得簡單</h1>
        <p class="hero-subtitle">被動指數投資，穩健累積財富</p>
        <div class="hero-actions">
            <a href="/calculator/dca" class="btn btn-light btn-lg hero-cta">
                開始計算
            </a>
            <a href="/learn/intro" class="btn btn-outline-light btn-lg hero-cta-secondary">
                了解更多
            </a>
        </div>
    </div>
</section>

<!-- Feature Cards Section -->
<section class="feature-cards-section">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-5 col-lg-4 mb-4">
                <a href="/calculator/dca" class="feature-card">
                    <span class="feature-card-icon">🧮</span>
                    <h3 class="feature-card-title">複利計算機</h3>
                    <p class="feature-card-desc">計算定期定額投資的複利效果</p>
                </a>
            </div>
            <div class="col-md-5 col-lg-4 mb-4">
                <a href="/calculator/fire" class="feature-card">
                    <span class="feature-card-icon">🔥</span>
                    <h3 class="feature-card-title">退休金計算</h3>
                    <p class="feature-card-desc">規劃你的退休金缺口與投資計劃</p>
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Why Passive Investing Section -->
<section class="why-passive-section">
    <div class="container">
        <h2 class="section-title text-center">📊 為什麼選擇被動投資</h2>
        <div class="stats-row">
            <div class="stat-item">
                <span class="stat-number">90%</span>
                <span class="stat-desc">主動基金長期跑輸指數</span>
            </div>
            <div class="stat-item">
                <span class="stat-number">0.03%</span>
                <span class="stat-desc">指數基金超低費用率</span>
            </div>
            <div class="stat-item">
                <span class="stat-number">20 年</span>
                <span class="stat-desc">長期投資複利效果驚人</span>
            </div>
        </div>
    </div>
</section>

<!-- Professor Quotes Section -->
<section class="quotes-section">
    <div class="quotes-header">
        <h2 class="section-title"><span class="title-icon">💬</span> <span class="title-text">周冠男教授名言</span></h2>
        <p class="section-subtitle">投資智慧語錄</p>
    </div>
    
    <div class="quotes-carousel-container">
        <div class="quotes-carousel" id="quotesCarousel">
            <div class="carousel-track" id="carouselTrack">
                <!-- Cards will be duplicated for infinite loop -->
                <div class="quote-card">
                    <div class="quote-card-inner">
                        <div class="quote-mark">"</div>
                        <p class="quote-text">從長期的相對績效來看，約有 80% 到 90% 的主動型基金經理人未能跑贏大盤</p>
                        <div class="quote-footer">
                            <div class="quote-line"></div>
                            <span class="quote-author">周冠男 教授</span>
                        </div>
                    </div>
                </div>
                <div class="quote-card">
                    <div class="quote-card-inner">
                        <div class="quote-mark">"</div>
                        <p class="quote-text">費用率是唯一可以確定影響長期報酬的因素</p>
                        <div class="quote-footer">
                            <div class="quote-line"></div>
                            <span class="quote-author">周冠男 教授</span>
                        </div>
                    </div>
                </div>
                <div class="quote-card">
                    <div class="quote-card-inner">
                        <div class="quote-mark">"</div>
                        <p class="quote-text">市場上 99% 的當沖者最終都會賠錢</p>
                        <div class="quote-footer">
                            <div class="quote-line"></div>
                            <span class="quote-author">周冠男 教授</span>
                        </div>
                    </div>
                </div>
                <div class="quote-card">
                    <div class="quote-card-inner">
                        <div class="quote-mark">"</div>
                        <p class="quote-text">專注本業是首要任務，短線交易只會影響本業和投資兩邊的績效</p>
                        <div class="quote-footer">
                            <div class="quote-line"></div>
                            <span class="quote-author">周冠男 教授</span>
                        </div>
                    </div>
                </div>
                <div class="quote-card">
                    <div class="quote-card-inner">
                        <div class="quote-mark">"</div>
                        <p class="quote-text">長期投資指數化，讓你更有底氣去做消費等不理性的行為</p>
                        <div class="quote-footer">
                            <div class="quote-line"></div>
                            <span class="quote-author">周冠男 教授</span>
                        </div>
                    </div>
                </div>
                <div class="quote-card">
                    <div class="quote-card-inner">
                        <div class="quote-mark">"</div>
                        <p class="quote-text">短線的波動是無法預測的（隨機漫步理論）</p>
                        <div class="quote-footer">
                            <div class="quote-line"></div>
                            <span class="quote-author">周冠男 教授</span>
                        </div>
                    </div>
                </div>
                <div class="quote-card">
                    <div class="quote-card-inner">
                        <div class="quote-mark">"</div>
                        <p class="quote-text">分散是投資裡面唯一免費的午餐</p>
                        <div class="quote-footer">
                            <div class="quote-line"></div>
                            <span class="quote-author">周冠男 教授</span>
                        </div>
                    </div>
                </div>
                <div class="quote-card">
                    <div class="quote-card-inner">
                        <div class="quote-mark">"</div>
                        <p class="quote-text">大部分股票非常脆弱，有 60% 的股票報酬率不如國庫券</p>
                        <div class="quote-footer">
                            <div class="quote-line"></div>
                            <span class="quote-author">周冠男 教授</span>
                        </div>
                    </div>
                </div>
                <div class="quote-card">
                    <div class="quote-card-inner">
                        <div class="quote-mark">"</div>
                        <p class="quote-text">市場大部分的報酬來自於少數 4% 的個股，要事先挑中機率比登天還難</p>
                        <div class="quote-footer">
                            <div class="quote-line"></div>
                            <span class="quote-author">周冠男 教授</span>
                        </div>
                    </div>
                </div>
                <div class="quote-card">
                    <div class="quote-card-inner">
                        <div class="quote-mark">"</div>
                        <p class="quote-text">0050 跟整體台灣大盤的聯動性是 95%，分散性在學理上已經足夠</p>
                        <div class="quote-footer">
                            <div class="quote-line"></div>
                            <span class="quote-author">周冠男 教授</span>
                        </div>
                    </div>
                </div>
                <div class="quote-card">
                    <div class="quote-card-inner">
                        <div class="quote-mark">"</div>
                        <p class="quote-text">投資指數型商品，不要用『存股』這個詞，因為它給人無風險的錯覺</p>
                        <div class="quote-footer">
                            <div class="quote-line"></div>
                            <span class="quote-author">周冠男 教授</span>
                        </div>
                    </div>
                </div>
                <div class="quote-card">
                    <div class="quote-card-inner">
                        <div class="quote-mark">"</div>
                        <p class="quote-text">市值型 ETF（如 0050）年化報酬較高，波動度（風險）反而較低</p>
                        <div class="quote-footer">
                            <div class="quote-line"></div>
                            <span class="quote-author">周冠男 教授</span>
                        </div>
                    </div>
                </div>
                <div class="quote-card">
                    <div class="quote-card-inner">
                        <div class="quote-mark">"</div>
                        <p class="quote-text">低成本、長期持有、分散投資，才是財富累積的可靠途徑</p>
                        <div class="quote-footer">
                            <div class="quote-line"></div>
                            <span class="quote-author">周冠男 教授</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Navigation -->
        <button class="carousel-nav carousel-nav-prev" id="prevBtn" aria-label="上一則">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M15 18l-6-6 6-6"/>
            </svg>
        </button>
        <button class="carousel-nav carousel-nav-next" id="nextBtn" aria-label="下一則">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 18l6-6-6-6"/>
            </svg>
        </button>
    </div>
    
    <!-- Progress indicator -->
    <div class="carousel-progress">
        <div class="carousel-progress-bar" id="progressBar"></div>
    </div>
</section>

<script>
(function() {
    const track = document.getElementById('carouselTrack');
    const carousel = document.getElementById('quotesCarousel');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const progressBar = document.getElementById('progressBar');
    
    const originalCards = document.querySelectorAll('.quote-card');
    const cardCount = originalCards.length;
    const cardWidth = 380; // Fixed card width
    const gap = 24; // Gap between cards
    const slideWidth = cardWidth + gap;
    
    let currentIndex = 0;
    let autoPlayTimer;
    const autoPlayInterval = 3000;
    let isTransitioning = false;
    
    // Clone cards for infinite loop
    function setupInfiniteLoop() {
        const cloneCount = 4; // Clone enough for smooth infinite scroll
        
        // Clone first cards to end
        for (let i = 0; i < cloneCount; i++) {
            const clone = originalCards[i % cardCount].cloneNode(true);
            clone.classList.add('clone');
            track.appendChild(clone);
        }
        
        // Clone last cards to beginning
        for (let i = cardCount - 1; i >= cardCount - cloneCount; i--) {
            const clone = originalCards[i].cloneNode(true);
            clone.classList.add('clone');
            track.insertBefore(clone, track.firstChild);
        }
        
        // Start at first real card
        currentIndex = cloneCount;
        track.style.transform = `translateX(-${currentIndex * slideWidth}px)`;
    }
    
    function updateProgress() {
        const realIndex = ((currentIndex - 4) % cardCount + cardCount) % cardCount;
        const progress = ((realIndex + 1) / cardCount) * 100;
        progressBar.style.width = `${progress}%`;
    }
    
    function goToSlide(index, smooth = true) {
        if (isTransitioning) return;
        
        currentIndex = index;
        
        if (smooth) {
            isTransitioning = true;
            track.style.transition = 'transform 0.5s cubic-bezier(0.25, 0.1, 0.25, 1)';
        } else {
            track.style.transition = 'none';
        }
        
        track.style.transform = `translateX(-${currentIndex * slideWidth}px)`;
        updateProgress();
    }
    
    function handleTransitionEnd() {
        isTransitioning = false;
        const cloneCount = 4;
        const totalCards = cardCount + (cloneCount * 2);
        
        // Jump to real card if on a clone
        if (currentIndex < cloneCount) {
            currentIndex = currentIndex + cardCount;
            goToSlide(currentIndex, false);
        } else if (currentIndex >= cardCount + cloneCount) {
            currentIndex = currentIndex - cardCount;
            goToSlide(currentIndex, false);
        }
    }
    
    function nextSlide() {
        goToSlide(currentIndex + 1);
    }
    
    function prevSlide() {
        goToSlide(currentIndex - 1);
    }
    
    // Auto play
    function startAutoPlay() {
        autoPlayTimer = setInterval(nextSlide, autoPlayInterval);
    }
    
    function resetAutoPlay() {
        clearInterval(autoPlayTimer);
        startAutoPlay();
    }
    
    // Event listeners
    track.addEventListener('transitionend', handleTransitionEnd);
    prevBtn.addEventListener('click', () => { prevSlide(); resetAutoPlay(); });
    nextBtn.addEventListener('click', () => { nextSlide(); resetAutoPlay(); });
    
    // Touch/swipe support
    let touchStartX = 0;
    let touchEndX = 0;
    
    carousel.addEventListener('touchstart', (e) => {
        touchStartX = e.changedTouches[0].screenX;
        clearInterval(autoPlayTimer);
    }, { passive: true });
    
    carousel.addEventListener('touchend', (e) => {
        touchEndX = e.changedTouches[0].screenX;
        const diff = touchStartX - touchEndX;
        if (Math.abs(diff) > 50) {
            diff > 0 ? nextSlide() : prevSlide();
        }
        startAutoPlay();
    }, { passive: true });
    
    // Pause on hover
    carousel.addEventListener('mouseenter', () => clearInterval(autoPlayTimer));
    carousel.addEventListener('mouseleave', startAutoPlay);
    
    // Initialize
    setupInfiniteLoop();
    updateProgress();
    startAutoPlay();
})();
</script>

